# OpenVPN installer (TLS-Crypt v2 / TLS-Crypt / TLS-Auth) + Telegram monitor bot

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Äî –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–π –Ω–∞–±–æ—Ä –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è OpenVPN –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è/–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ Telegram‚Äë–±–æ—Ç–∞.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π –∫ —Ä–∞–±–æ—Ç–µ OpenVPN‚Äë—Å–µ—Ä–≤–µ—Ä
- CLI‚Äë–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ —Å–∫—Ä–∏–ø—Ç–∏–Ω–≥–∞ (–Ω–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º —Å JSON‚Äë–≤—ã–≤–æ–¥–æ–º)
- –ü—Ä–æ–¥–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç–∞, —Ç–∞–∫ –∏ —Å–µ—Ä–≤–µ—Ä–∞
- –°–ø–∏—Å–æ–∫ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –ø—Ä–∏ –æ—Ç–∑—ã–≤–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (—á–µ—Ä–µ–∑ management interface)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ OpenVPN](https://community.openvpn.net/openvpn/wiki/OpenvpnSoftwareRepos), –∫–æ–≥–¥–∞ –≤–æ–∑–º–æ–∂–Ω–æ, –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤
- –ü—Ä–∞–≤–∏–ª–∞ —Ñ–∞–µ—Ä–≤–æ–ª–∞ –∏ —Ñ–æ—Ä–≤–∞—Ä–¥–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–Ω–∞—Ç–∏–≤–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ firewalld –∏ nftables, –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Äî iptables)
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–æ–¥—Å–µ—Ç–∏ VPN (IPv4 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `10.8.0.0/24`, IPv6 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `fd42:42:42:42::/112`)
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π tunnel MTU (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `1460` —Å—Ç–∞–±–∏–ª—å–Ω–æ –¥–ª—è PPPoE)
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç —É–º–µ–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É–¥–∞–ª–∏—Ç—å OpenVPN –≤–º–µ—Å—Ç–µ —Å –∫–æ–Ω—Ñ–∏–≥–∞–º–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ —Ñ–∞–µ—Ä–≤–æ–ª–∞
- –†–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã DNS‚Äë—Ä–µ–∑–æ–ª–≤–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ ¬´–ø—É—à–∏—Ç—å¬ª –∫–ª–∏–µ–Ω—Ç–∞–º
- –í—ã–±–æ—Ä —Å–∞–º–æ—Ö–æ—Å—Ç–∏–Ω–≥–æ–≤–æ–≥–æ —Ä–µ–∑–æ–ª–≤–µ—Ä–∞ Unbound (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Unbound)
- –í—ã–±–æ—Ä –º–µ–∂–¥—É TCP –∏ UDP
- –ì–∏–±–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ IPv4/IPv6:
  - Endpoint —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ IPv4 –∏–ª–∏ IPv6 (–∫–∞–∫ –∫–ª–∏–µ–Ω—Ç—ã –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è)
  - –ö–ª–∏–µ–Ω—Ç—ã IPv4‚Äëonly, IPv6‚Äëonly –∏–ª–∏ dual‚Äëstack (–∞–¥—Ä–µ—Å–∞—Ü–∏—è VPN –∏ –≤—ã—Ö–æ–¥ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç)
  - –ü–æ–¥–¥–µ—Ä–∂–∞–Ω—ã –≤—Å–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏: 4‚Üí4, 4‚Üí4/6, 4‚Üí6, 6‚Üí4, 6‚Üí6, 6‚Üí4/6
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç —É—Ç–µ—á–µ–∫: –±–ª–æ–∫–∏—Ä—É–µ—Ç –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –≤ —Ä–µ–∂–∏–º–∞—Ö single‚Äëstack
- –ó–∞–ø—É—Å–∫ –≤ –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ: `nobody`/`nogroup`
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —É—Ç–µ—á–µ–∫ DNS –Ω–∞ Windows 10
- –°–ª—É—á–∞–π–Ω–æ–µ –∏–º—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
- –û–ø—Ü–∏—è –∑–∞—â–∏—Ç–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–∞—Ä–æ–ª–µ–º (—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞)
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–µ—à–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –ø—Ä–æ—Ñ–∏–ª—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (–æ—Ç–∫–ª—é—á–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ IP‚Äë–∞–¥—Ä–µ—Å–∞)
- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –æ—Ç–ø–µ—á–∞—Ç–∫—É (peer fingerprint)** (OpenVPN 2.6+): —É–ø—Ä–æ—â—ë–Ω–Ω–∞—è WireGuard‚Äë–ø–æ–¥–æ–±–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –±–µ–∑ CA
- –ò –º–Ω–æ–≥–æ –¥—Ä—É–≥–∏—Ö –º–µ–ª–æ—á–µ–π!

---

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–°–∫—Ä–∏–ø—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—ã Linux:

|                     | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ |
| ------------------- | ------- |
| AlmaLinux >= 8      | ‚úÖ ü§ñ   |
| Amazon Linux 2023   | ‚úÖ ü§ñ   |
| Arch Linux          | ‚úÖ ü§ñ   |
| CentOS Stream >= 8  | ‚úÖ ü§ñ   |
| Debian >= 11        | ‚úÖ ü§ñ   |
| Fedora >= 40        | ‚úÖ ü§ñ   |
| openSUSE Leap >= 16 | ‚úÖ ü§ñ   |
| openSUSE Tumbleweed | ‚úÖ ü§ñ   |
| Oracle Linux >= 8   | ‚úÖ ü§ñ   |
| Rocky Linux >= 8    | ‚úÖ ü§ñ   |
| Ubuntu >= 18.04     | ‚úÖ ü§ñ   |

–í–∞–∂–Ω–æ:

- –°–∫—Ä–∏–ø—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–æ–º **—Ç–æ–ª—å–∫–æ** –Ω–∞ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞—Ö, Debian 11 –∏ Ubuntu 22.
  - –¢–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ `amd64`.
- –°–∫—Ä–∏–ø—Ç —Ç—Ä–µ–±—É–µ—Ç `systemd`.

### OpenVPN (—Å–µ—Ä–≤–µ—Ä)
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ OpenVPN (–≤–µ—Ç–∫–∞ `openvpn-install.sh`).
- –í—ã–±–æ—Ä –∑–∞—â–∏—Ç—ã control‚Äëchannel:
  - **TLS-Crypt v2** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –Ω–∞ –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞.
  - TLS-Crypt (classic) ‚Äî —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π scramble.
  - TLS-Auth ‚Äî HMAC –ø–æ–¥–ø–∏—Å—å control‚Äëchannel.
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è `.ovpn` –∫–ª–∏–µ–Ω—Ç–æ–≤ (–≤–∫–ª—é—á–∞—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤/–∫–ª—é—á–µ–π –≤ —Ñ–∞–π–ª).
- `status` –ª–æ–≥ –¥–ª—è –æ–Ω–ª–∞–π–Ω‚Äë—Å—Ç–∞—Ç—É—Å–∞ –∏ —É—á—ë—Ç–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–æ—Ç–æ–º).
- (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –Ω–∞–±–æ—Ä —Ç–≤–∏–∫–æ–≤ –¥–ª—è UDP —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω—é–∞–Ω—Å–æ–≤ systemd.

### Telegram monitor bot
- –ö–Ω–æ–ø–∫–∏: —Å–ø–∏—Å–æ–∫/—Å—Ç–∞—Ç—É—Å –∫–ª—é—á–µ–π, –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–∞, —Ç—Ä–∞—Ñ–∏–∫/–æ—á–∏—Å—Ç–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞, —Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞, –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–ª—é—á–µ–π, –±—ç–∫–∞–ø/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ —Ç.–¥.
- –ß–∏—Ç–∞–µ—Ç `status.log` OpenVPN –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫—Ç–æ –æ–Ω–ª–∞–π–Ω, –∫–∞–∫–∏–µ –∫–ª—é—á–∏ –æ—Ç–∫–ª—é—á–µ–Ω—ã, –∏ —Ç.–ø.

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
apt update && apt install -y git && \
  git clone https://github.com/XSFORM/OpenVpn_XOR_TLS2.git && \
  cd OpenVpn_XOR_TLS2 && \
  chmod +x install.sh install_openvpn_xor_tls2.sh openvpn-install.sh && \
  ./install.sh
```

> `install.sh` ‚Äî –≤–∞—à —É–¥–æ–±–Ω—ã–π ‚Äú–≤—Ö–æ–¥–Ω–æ–π‚Äù —Å–∫—Ä–∏–ø—Ç, –≤–Ω—É—Ç—Ä–∏ –æ–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É OpenVPN –∏ —Å—Ç–∞–≤–∏—Ç/–≤–∫–ª—é—á–∞–µ—Ç –±–æ—Ç (–µ—Å–ª–∏ –≤—ã —ç—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏).

---

## –í–∞–∂–Ω–æ –ø—Ä–æ –≤—ã–±–æ—Ä TLS (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

–í –º–æ–∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö **–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–±—Ä–∞–Ω TLS‚ÄëCrypt v2**.

–í–æ –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π —Ä–µ–∂–∏–º (TLS‚ÄëCrypt / TLS‚ÄëAuth) –≤ –º–µ–Ω—é `Control channel security`.

### –ö–∞–∫ –ø–æ–º–µ–Ω—è—Ç—å *–¥–µ—Ñ–æ–ª—Ç* (–µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –Ω–µ —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ)
–í `openvpn-install.sh` –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–æ–≥–æ –≤–∏–¥–∞:

```bash
select_with_labels "Control channel security" tls_sig_labels TLS_SIG_MODES "crypt-v2" TLS_SIG_MODE
```

–ò –∑–∞–º–µ–Ω–∏—Ç–µ `"crypt-v2"` –Ω–∞ –Ω—É–∂–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:
- `"crypt-v2"` ‚Äî TLS‚ÄëCrypt v2
- `"crypt"` ‚Äî TLS‚ÄëCrypt (classic)
- `"auth"` ‚Äî TLS‚ÄëAuth

---


## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (OpenVPN)

–°—Ç–∞—Ç—É—Å/—Ä–µ—Å—Ç–∞—Ä—Ç:
```bash
systemctl status openvpn-server@server --no-pager -l
systemctl restart openvpn-server@server
systemctl stop openvpn-server@server
```

–õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞:
```bash
journalctl -u openvpn-server@server -n 200 --no-pager
journalctl -u openvpn-server@server -f
```

`status.log` (–æ–Ω –Ω—É–∂–µ–Ω –±–æ—Ç—É):
- –ß–∞—Å—Ç–æ –ø—É—Ç—å –∑–∞–¥–∞—ë—Ç—Å—è –≤ `server.conf` —Å—Ç—Ä–æ–∫–æ–π `status ...`
- –ü—Ä–∏–º–µ—Ä—ã:
  - `/var/log/openvpn/status.log`
  - `/run/openvpn-server/status-server.log`

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–æ–ø–∏—Å–∞–Ω–æ:
```bash
grep -nE '^\s*status\b' /etc/openvpn/server/server.conf
```

---

## Telegram monitor bot

### –ì–¥–µ –ª–µ–∂–∏—Ç
–û–±—ã—á–Ω–æ:
- `/root/monitor_bot/openvpn_monitor_bot.py`
- systemd unit: `vpn_bot.service`

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–æ–º
```bash
systemctl status vpn_bot.service --no-pager -l
systemctl restart vpn_bot.service
journalctl -u vpn_bot.service -n 200 --no-pager
journalctl -u vpn_bot.service -f
```

### –í–∞–∂–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –∫–æ–¥–µ
–û–±—ã—á–Ω–æ –≤–≤–µ—Ä—Ö—É —Ñ–∞–π–ª–∞ (–∏–ª–∏ —Ä—è–¥–æ–º —Å –∫–æ–Ω—Ñ–∏–≥‚Äë–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏):
- `BOT_TOKEN`
- `ADMIN_ID` (–±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—É)
- –ø—É—Ç–∏ –∫ OpenVPN/EasyRSA/–ø–∞–ø–∫–µ —Å –∫–ª—é—á–∞–º–∏ `.ovpn`
- –ø—É—Ç—å –∫ `status.log`

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –ø—Ä–æ scramble‚Äëxormask

–í –º–æ–µ–π —Å–±–æ—Ä–∫–µ/–ª–æ–≥–∏–∫–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ **scramble‚Äëxormask –≤–∫–ª—é—á–∞–µ—Ç—Å—è –¥–ª—è —Ä–µ–∂–∏–º–∞ TLS‚ÄëCrypt (classic)**.

–≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ, —á—Ç–æ–±—ã **–Ω–µ –ª–æ–º–∞—Ç—å** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, –∫–æ–≥–¥–∞ –≤—ã–±—Ä–∞–Ω TLS‚ÄëCrypt v2: v2 –∏ classic –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ —Ñ–∞–π–ª—ã/–∫–ª—é—á–∏, –∏ —Å–º–µ—à–∏–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —á–∞—Å—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ ‚Äú–ø–æ–ª—É—Ä–∞–±–æ—á–∏–º‚Äù `.ovpn`.

---

## –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è –≤ `.ovpn`

### –î–ª—è TLS‚ÄëCrypt v2 (–ø–æ–ª–Ω—ã–π —Ñ–∞–π–ª)
–í –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º `.ovpn` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –±–ª–æ–∫–∏:
- `<ca> ... </ca>`
- `<cert> ... </cert>`
- `<key> ... </key>`
- `<tls-crypt-v2> ... </tls-crypt-v2>`

### –î–ª—è TLS‚ÄëCrypt (classic)
- `<ca>`, `<cert>`, `<key>`
- `<tls-crypt> ... </tls-crypt>`

---

## Troubleshooting

### –ö–ª–∏–µ–Ω—Ç ‚Äú–≤—Ä–æ–¥–µ –ø–æ–¥–∫–ª—é—á—ë–Ω‚Äù, –Ω–æ –ø—Ä–æ–ø–∞–¥–∞–µ—Ç –∏–∑ status/log
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `explicit-exit-notify 1` (–¥–ª—è UDP).
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ MTU/MSS (`tun-mtu`, `mssfix`) –∏ –Ω–∞–ª–∏—á–∏–µ `fragment` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ).
- –°–º–æ—Ç—Ä–∏—Ç–µ live‚Äë–ª–æ–≥:
  ```bash
  journalctl -u openvpn-server@server -f
  ```

### –ë–æ—Ç –ø–∏—à–µ—Ç ‚Äú–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞‚Äù
- –í `button_handler` –Ω–µ—Ç –≤–µ—Ç–∫–∏ `elif data == 'traffic':` –∏–ª–∏ callback_data –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç.
- –ë—ã—Å—Ç—Ä–æ —É–≤–∏–¥–µ—Ç—å –ø—Ä–∏—Ö–æ–¥—è—â–∏–µ callback_data:
  ```bash
  journalctl -u vpn_bot.service -n 200 --no-pager | grep "DEBUG callback_data"
  ```

### –í —Ç—Ä–∞—Ñ–∏–∫–µ ‚Äú0.00 GB‚Äù
- –ï—Å–ª–∏ –≤—ã —Å—á–∏—Ç–∞–µ—Ç–µ —Ç—Ä–∞—Ñ–∏–∫ –ø–æ `status.log`, —Ç–æ –¥–∞–Ω–Ω—ã–µ –ø–æ—è–≤—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞:
  1) –∫–ª–∏–µ–Ω—Ç —Ä–µ–∞–ª—å–Ω–æ –æ–Ω–ª–∞–π–Ω,
  2) –≤ —Å—Ç–∞—Ç—É—Å–µ –µ—Å—Ç—å `Bytes Received/Sent`,
  3) –±–æ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–∞—Ä—Å–∏—Ç *–≤–µ—Ä—Å–∏—é* status‚Äë–ª–æ–≥–∞ (`status-version 2` / suppress timestamps –∏ —Ç.–¥.).
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∞–º `status.log`:
  ```bash
  tail -n 50 /var/log/openvpn/status.log
  ```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ –ø—É–±–ª–∏—á–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
- `ADMIN_ID` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω ‚Äî –∏–Ω–∞—á–µ –±–æ—Ç –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –≤—Å–µ–º.
- –ó–∞–∫—Ä—ã–≤–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø –∫ SSH –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –ø–æ—Ä—Ç—ã firewall‚Äô–æ–º.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–ø—Ä–∏–º–µ—Ä)
- `openvpn-install.sh` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ OpenVPN
- `install.sh` ‚Äî –≤–∞—à –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ + –±–æ—Ç + –ø–∞—Ç—á–∏)
- `monitor_bot/` ‚Äî –∫–æ–¥ –±–æ—Ç–∞
- `vpn_bot.service` ‚Äî systemd unit –¥–ª—è –±–æ—Ç–∞

---

## –ê–≤—Ç–æ—Ä

XSFORM  
Telegram: [@XSFORM](https://t.me/XS_FORM)